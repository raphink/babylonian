%%
%% This is file `babyloniannum.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% babyloniannum.dtx  (with options: `package')
%% 
%% This is a generated file.
%% 
%% Copyright (C) 2011 by RaphaÃ«l Pinson <raphink@gmail.com>
%% --------------------------------------------------------------------------
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
\NeedsTeXFormat{LaTeX2e}[1999/12/01]
\ProvidesPackage{babyloniannum}
    [2011/08/19 0.5 Typeset Babylonian numerals with XeTeX and LuaTeX]
\ProvidesPackage{babyloniannum}
\RequirePackage{fontspec}
\RequirePackage{xunicode}
\RequirePackage{numname}
\newcommand{\babylonianfont}{Santakku}
\newcommand{\unicodedisp}[1]{\char"#1}
\newcommand{\babylonian}[1]{%
  \protect\babyloniannum{\arabic{#1}}}
\newcommand{\babylonianglyph}[1]{%
\ifnum #1 > \z@ % glyph is not zero
  \chardef\m@mten=10 % cuts by units of 10
  \numdigits{#1} % parse number
  \ifcase\c@xsm@mctr %
    \relax %
    \or
    \unicodedisp{1230B} %10
    \or
    \unicodedisp{1230B}\kern-0.15em{}\unicodedisp{1230B} %20 -- unknown?
    \or
    \unicodedisp{1230D} %30
    \or
    \unicodedisp{1240F} %40
    \or
    \unicodedisp{12410} %50
  \fi
  \ifnum \c@ism@mctr > \z@ %
    \ifnum \c@xsm@mctr > \z@ %
  \kern-0.5em{} % make glyphs closer
    \fi %
  \fi %
  \ifcase\c@ism@mctr %
    \or
    \unicodedisp{12079} %1
    \or
    \unicodedisp{1222B} %2
    \or
    \unicodedisp{12408} %3
    \or
    \unicodedisp{120FB} %4
    \or
    \unicodedisp{1240A} %5
    \or
    \unicodedisp{1240B} %6
    \or
    \unicodedisp{1240C} %7
    \or
    \unicodedisp{1240D} %8
    \or
    \unicodedisp{1240E} %9
  \fi
  \addtocounter{baby@glyphs}{1}%
\else
  \ifnum\c@baby@glyphs > \z@ %
\kern0.5em{}% empty space for zero
  \fi
\fi
}
\newcounter{baby@ism@mctr}  % "units"
\newcounter{baby@xsm@mctr}  % "tens"
\newcounter{baby@csm@mctr}  % "hundreds"
\newcounter{baby@ksm@mctr}  % "thousands"
\newcounter{baby@xksm@mctr} % "ten thousands"
\newcounter{baby@cksm@mctr} % "hundred thousands"
\newcounter{baby@msm@mctr}  % "millions"
\newcounter{baby@xmsm@mctr} % "ten millions"
\newcounter{baby@cmsm@mctr} % "hundred millions"
\newcounter{baby@bsm@mctr}  % "billions"
\newcommand{\babylonian@setcounters}{%
  \setcounter{baby@ism@mctr}{\c@ism@mctr}%
  \setcounter{baby@xsm@mctr}{\c@xsm@mctr}%
  \setcounter{baby@csm@mctr}{\c@csm@mctr}%
  \setcounter{baby@ksm@mctr}{\c@ksm@mctr}%
  \setcounter{baby@xksm@mctr}{\c@xksm@mctr}%
  \setcounter{baby@cksm@mctr}{\c@cksm@mctr}%
  \setcounter{baby@msm@mctr}{\c@msm@mctr}%
  \setcounter{baby@xmsm@mctr}{\c@xmsm@mctr}%
  \setcounter{baby@cmsm@mctr}{\c@cmsm@mctr}%
  \setcounter{baby@bsm@mctr}{\c@bsm@mctr}%
}
\newcounter{baby@glyphs}%
\newcommand{\babyloniannum}[1]{%
  \chardef\m@mten=60 % Cut by units of 60
  \numdigits{#1} % Parse number
  \babylonian@setcounters%
  {\fontspec{\babylonianfont}%
  \mbox{%
  \setcounter{baby@glyphs}{0}%
  \babylonianglyph{\c@baby@bsm@mctr}%
  \babylonianglyph{\c@baby@cmsm@mctr}%
  \babylonianglyph{\c@baby@xmsm@mctr}%
  \babylonianglyph{\c@baby@msm@mctr}%
  \babylonianglyph{\c@baby@cksm@mctr}%
  \babylonianglyph{\c@baby@xksm@mctr}%
  \babylonianglyph{\c@baby@ksm@mctr}%
  \babylonianglyph{\c@baby@csm@mctr}%
  \babylonianglyph{\c@baby@xsm@mctr}%
  \babylonianglyph{\c@baby@ism@mctr}%
  }}
}
\endinput
%%
%% End of file `babyloniannum.sty'.
